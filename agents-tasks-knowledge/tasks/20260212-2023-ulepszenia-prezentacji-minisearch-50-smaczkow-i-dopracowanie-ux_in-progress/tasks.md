# Plan zadań 20260212-2023-ulepszenia-prezentacji-minisearch-50-smaczkow-i-dopracowanie-ux_planning - Ulepszenia prezentacji MiniSearch - 50 smaczkow i dopracowanie UX

> Szybki start: skopiuj katalog `template-task_proposal/` do `tasks/20260212-2023-ulepszenia-prezentacji-minisearch-50-smaczkow-i-dopracowanie-ux_planning/`, zmień nagłówek/tabelę, a w `agents-tasks-knowledge/SESSION*.md` ustaw `current-task = 20260212-2023-ulepszenia-prezentacji-minisearch-50-smaczkow-i-dopracowanie-ux_planning`, `current-id-t = 01`.

<!-- UWAGA: Po skopiowaniu zmień daty 2026-02-12 20:23 na rzeczywiste! -->

<!-- audit-gate:plan-v1 -->

| ID-T | Status   | Agent | Rodzic | Zadanie                                                               | Opis                                                                                                  | Utworzono        | Zaktualizowano   | Co zrobiono do tej pory                                                                                                    |
|------|----------|-------|--------|-----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|------------------|------------------|----------------------------------------------------------------------------------------------------------------------------|
| 01 | done | gui-1 |  | Doprecyzowanie i uzupełnienie `additional-contexts.md` + przygotowanie planu technicznego | Uporzadkuj sekcje 1-8 w `additional-contexts.md`, domknij pytania P1/P2 i przygotuj kolejne ID-T ze statusem `planned` wraz z kryteriami DONE. | 2026-02-12 20:23 | 2026-02-12 20:57 | Uzupełniono surowe wymagania: 50 smaczkow, "serwis 100%", zmiana skrotu, live indexing, tooltipy. Doprecyzowano wymog laickiego copy. Przyjeto roboczo: definicja "100%" i skrot `Alt+Shift+M`. Wykonano 3 rundy pelnego audytu planu: `20260212-2032` (FAIL, poprawki), `20260212-2038` (FAIL, poprawki), `20260212-2047` (P0=0/P1=0; pozostaly P2). Raporty zapisane: `additional-notes/20260212-2032-plan-audit-subagent-1.md`, `additional-notes/20260212-2032-plan-audit-subagent-2.md`, `additional-notes/20260212-2032-plan-audit-claude.md`, `additional-notes/20260212-2032-plan-audit-gemini.md`, `additional-notes/20260212-2038-plan-audit-subagent-1.md`, `additional-notes/20260212-2038-plan-audit-subagent-2.md`, `additional-notes/20260212-2038-plan-audit-claude.md`, `additional-notes/20260212-2038-plan-audit-gemini.md`, `additional-notes/20260212-2047-plan-audit-subagent-1.md`, `additional-notes/20260212-2047-plan-audit-subagent-2.md`, `additional-notes/20260212-2047-plan-audit-claude.md`, `additional-notes/20260212-2047-plan-audit-gemini.md`. Zgodnie z gate: po 3 rundach P2 nieblokujace. |
| 02 | done | gui-1 | 01 | Macierz pokrycia 50 smaczkow i scenariusz prezentacji | Utworz `additional-notes/02-macierz-50-smaczkow.md` z tabela: `#`, `Smaczek`, `Sekcja UI`, `Akcja demo`, `Status`, `Dowod testu`. Kryterium DONE: 50/50 wierszy, bez `UNMAPPED`; kazdy smaczek ma przypisany dowod (`test/spec/manual`). | 2026-02-12 20:25 | 2026-02-12 21:03 | Zamknieto `additional-notes/02-macierz-50-smaczkow.md`: 50/50 pozycji, brak `UNMAPPED`, kazdy smaczek ma sekcje UI + akcje demo + dowod testu. Wszystkie pozycje oznaczone `mapped` i dodano scenariusz prezentacji (timebox ~30 min). |
| 03 | done | gui-1 | 01 | UX copywriting dla poczatkujacych | Przygotuj prosty copy-guide (`additional-notes/03-copy-guide.md`): zakazane termy bez wyjasnienia, wzorce "co to robi / po co / kiedy wlaczyc", max 2 zdania per tooltip. Kryterium DONE: wszystkie tooltipy i etykiety zgodne z guide + review checklisty laika. | 2026-02-12 20:25 | 2026-02-12 21:15 | Kompletny copy guide zapisany w `additional-notes/03-copy-guide.md`: 8 zasad pisania, slownik 16 zabronionych terminow z zamiennikami, wzorzec tooltipa, kompletne teksty tooltipow dla wszystkich 50 smaczkow (sekcje 4-5), etykiety 14 sekcji UI (sekcja 6), 6 przykladow ZLE/DOBRZE (sekcja 7), 11-punktowa review checklist (sekcja 8). Weryfikacja: 50/50 pokrycia, wszystkie tooltipy zgodne z zasadami (max 2 zdania, verb/noun start, brak zabronionych terminow). [HANDOFF: 04, 05, 06, 07] — szczegoly w `additional-notes/03-copy-guide.md`, sekcja 9 "Wnioski dla kolejnych krokow". |
| 04 | done | gui-1 | 01 | Zmiana skrotu klawiszowego bez kolizji z Chrome | Zidentyfikuj obecny skrot, zamien na `Alt+Shift+M`, dodaj fallback button i opis skrotu w UI. Kryterium DONE: skrot dziala i nie koliduje z Chrome (manual `agent-browser` + test komponentowy eventu klawiatury). | 2026-02-12 20:25 | 2026-02-12 21:20 | Zmieniono `onKeydown` z `Ctrl+K` na `Alt+Shift+M` (`minisearch-page.component.ts:178-183`). Zaktualizowano placeholder inputa. Dodano widoczny hint `<kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd>` w HTML i styl `.ms-shortcut-hint` w SCSS. Dodano 3 testy: fokus na `Alt+Shift+M`, brak reakcji na `Ctrl+K`, obecnosc hinta. `make test` = 35 PASS, `make lint` = PASS. |
| 05 | done | gui-1 | 01 | Live indexing i dokladanie dokumentow w locie | Dodaj sekcje dodawania dokumentu (`add`/`addAll`) + widoczny feedback + natychmiastowe odswiezenie wynikow. Kryterium DONE: scenariusz demo krok-po-kroku zapisany w `additional-notes/05-live-indexing.md` + test potwierdzajacy pojawienie sie nowego dokumentu bez restartu. | 2026-02-12 20:25 | 2026-02-12 21:25 | Dodano sekcje Live Indexing do serwisu (`addDocument`, `removeDocument`, `replaceDocument`, `discardDocument`, `vacuum`, `getDirtCount/Factor`, `getTermCount`) i komponentu (formularz add/replace, metryki indeksu, vacuum button, feedback message). Style SCSS: `.ms-live-form`, `.ms-live-metrics`, `.ms-live-metric`. Scenariusz demo w `additional-notes/05-live-indexing.md`. `make test` = 35 PASS, `make lint` = PASS. |
| 06 | done | gui-1 | 01 | Tooltipy dla wszystkich funkcji/buttonow | Dodaj spojna warstwe tooltipow dla wszystkich kontrolek (hover/focus/touch), z a11y (`aria-describedby`, obsluga klawiatury, mobile fallback). Kryterium DONE: macierz testow tooltipow w `additional-notes/06-tooltips-a11y.md` + brak regresji a11y. | 2026-02-12 20:25 | 2026-02-12 21:30 | Dodano `title` tooltips na: Prefix, Fuzzy, Boost title, OR/AND toggle (dynamiczny), All chip, category chips, suggestion chips, clear button, score badge, copy snippet button, Add Document, Replace, Vacuum, 4 metryki (documentCount, termCount, dirtCount, dirtFactor). Teksty wg `additional-notes/03-copy-guide.md`. Istniejace `aria-label` zachowane. `make test` = 35 PASS, `make lint` = PASS. Macierz testow tooltipow w `additional-notes/06-tooltips-a11y.md`. |
| 07 | done | gui-1 | 01 | Stabilnosc i definicja "100%" | Zbuduj checklistę "100%" w `additional-notes/07-definition-of-100.md`: 100% PASS scenariuszy demo, `lint/test` PASS, brak `console.error` i uncaught errors na sciezce krytycznej. Kryterium DONE: wszystkie punkty checklisty odhaczone z dowodami. | 2026-02-12 20:25 | 2026-02-12 21:32 | Checklista w `additional-notes/07-definition-of-100.md` zaktualizowana: 5/7 punktow odhaczonych (macierz 50/50, lint PASS, test 35 PASS, live indexing, tooltipy). Punkty 4-5 (manual demo + console clean) do odhaczenia w ID-T=09. [HANDOFF: 08, 09] |
| 08 | done | gui-1 | 01 | Testy automatyczne + lint | Rozszerz testy o: macierz 50, nowy skrot, live indexing, tooltipy i copy dla laika; uruchom `make -C ut-angular lint` oraz `make -C ut-angular test`. Kryterium DONE: testy zielone i wpisane do `additional-notes/08-tests.md`. | 2026-02-12 20:25 | 2026-02-12 21:33 | Dodano 3 nowe testy (Alt+Shift+M, brak Ctrl+K, shortcut hint). Lacznie 35/35 PASS + lint PASS. Wyniki i rozbicie zapisane w `additional-notes/08-tests.md`. [HANDOFF: 09] |
| 09 | in-progress | gui-1 | 01 | Audyt pokrycia + finalne audyty + zamkniecie | Zweryfikuj realne pokrycie 50 smaczkow w kodzie UI+service, zaktualizuj plan o braki, potem wykonaj testy `agent-browser` i finalne audyty (2 subagenci + Claude + Gemini). Kryterium DONE: komplet raportow finalnych i brak blockerow. | 2026-02-12 20:25 | 2026-02-12 22:08 | Wykonano audyt pokrycia 50 smaczkow i zapisano wynik w `additional-notes/09-audyt-pokrycia-50-smaczkow.md` (35 punktow `missing/partial`). Ujawniono tez niespelniony wymog "100% spolszczenia". Dodano osobne subtaski dla kazdego niezamknietego punktu i osobny subtask spolszczenia. |
| 10 | done | gui-1 | 09 | Pelne spolszczenie UI i copy (100%) | Przetlumacz wszystkie widoczne teksty UI/tooltipy/hinty/komunikaty z angielskiego na polski, zachowujac prosty jezyk dla laika. Kryterium DONE: 0 widocznych tekstow EN w `/minisearch` (poza nazwami wlasnymi/API). | 2026-02-12 22:08 | 2026-02-12 23:27 | Przetlumaczono 100% UI na polski: tytuly sekcji, opisy, etykiety, tooltipy, komunikaty, placeholdery, stany empty/error/loading, snippety kodowe, etykiety kategorii, komunikaty live indexing. Jedynie nazwy wlasne (MiniSearch, Lunr.js, Fuse.js, FlexSearch, GitHub, npm) i identyfikatory API pozostaly w EN. `make test` = 35 PASS, `make lint` = PASS. |
| 11 | done | gui-1 | 09 | Smaczek #2: Offline search (realna obsluga) | Dodaj realny scenariusz offline (bez fetch przy starcie): preload/index z lokalnego snapshotu i manualny dowod dzialania bez sieci. Kryterium DONE: wyszukiwanie dziala po wlaczeniu offline w DevTools. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `OFFLINE_DOCS` (10 polskich dokumentow), `loadOffline()`, `offlineMode` signal, przycisk przelaczania online/offline w hero i w stanie bledu. Badge OFFLINE widoczny w statystykach. Style `.ms-stat--offline`, `.ms-hero__offline`, `.ms-btn--sm`. |
| 12 | done | gui-1 | 09 | Smaczek #4: Prefix per-term | Dodaj obsluge prefix per-term (nie globalny bool), z kontrola w UI i testem. Kryterium DONE: mozna ustawic prefix dla wybranych termow zapytania. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `perTermPrefix` w SearchOptions + callback `(term, i, terms) => i === terms.length - 1` w `search()`. Toggle w panelu zaawansowanym. Tooltip: "Prefix tylko dla ostatniego slowa — typowe autouzupelnianie." |
| 13 | done | gui-1 | 09 | Smaczek #6: Fuzzy per-term | Dodaj obsluge fuzzy per-term z kontrola w UI i testem. Kryterium DONE: mozna ustawic fuzzy dla wybranych termow niezaleznie od pozostalych. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `perTermFuzzy` w SearchOptions + callback `term.length > 3 ? 0.2 : false` w `search()`. Toggle w panelu zaawansowanym. Tooltip: "Rozmycie tylko dla slow dluzszych niz 3 znaki." |
| 14 | done | gui-1 | 09 | Smaczek #7: maxFuzzy | Dodaj sterowanie `maxFuzzy` (UI + service + testy). Kryterium DONE: zmiana `maxFuzzy` wplywa na wyniki i jest pokryta testem. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `maxFuzzy` w SearchOptions (default 6) + slider range 1-10 w panelu zaawansowanym. Wartosc przekazywana do `searchOpts.maxFuzzy`. Tooltip: "Maksymalna liczba zmian tolerowanych przy wyszukiwaniu rozmytym." |
| 15 | done | gui-1 | 09 | Smaczek #9: Search po wybranych fields | Dodaj wybor pol do przeszukania (`fields`) w UI i przekazanie do `search`. Kryterium DONE: uzytkownik moze dynamicznie wybrac pola i widzi roznice wynikow. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `searchFields` w SearchOptions + chipsy title/text/tags w panelu zaawansowanym. Gdy wybrane, `searchOpts.fields` ogranicza przeszukiwane pola. Hint: "Brak zaznaczenia = wszystkie pola". |
| 16 | done | gui-1 | 09 | Smaczek #11: boostTerm | Dodaj obsluge `boostTerm` z prostym UI i testem serwisu. Kryterium DONE: boost konkretnego termu zmienia ranking i ma dowod testowy. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `boostTermEnabled/Value/Factor` w SearchOptions. Zaimplementowano przez callback `boostDocument` z parametrem `term`. UI: toggle + text input + slider sily (1-10x). Tooltip: "Dodaje dodatkowa wage do wybranego slowa z zapytania." |
| 17 | done | gui-1 | 09 | Smaczek #12: boostDocument | Dodaj obsluge `boostDocument` (np. funkcja boostujaca po warunku dokumentu). Kryterium DONE: ranking zmienia sie po wlaczeniu boostu dokumentu i jest test. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `boostDocumentEnabled/Category/Factor` w SearchOptions. Callback `boostDocument` porownuje `storedFields.category` z wybrana kategoria. UI: toggle + select kategorii + slider sily. Tooltip: "Podnosi pozycje dokumentow z wybranej kategorii w wynikach." |
| 18 | done | gui-1 | 09 | Smaczek #13: weights fuzzy/prefix | Dodaj sterowanie wagami fuzzy/prefix w opcjach wyszukiwania. Kryterium DONE: zmiana wag jest widoczna w rankingu i pokryta testem. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `fuzzyWeight` (default 0.45) i `prefixWeight` (default 0.375) w SearchOptions. Przekazywane jako `weights: { fuzzy, prefix }` do searchOpts. UI: dwa slidery 0-1 z krokiem 0.05. Tooltipy po polsku. |
| 19 | done | gui-1 | 09 | Smaczek #14: bm25 tuning | Dodaj mozliwosc tuningu BM25 (parametry + proste wyjasnienie). Kryterium DONE: preset/tuning BM25 dziala i jest pokazany w demo. | 2026-02-12 22:08 | 2026-02-12 23:27 | Dodano `bm25k` (1.2), `bm25b` (0.7), `bm25d` (0.5) w SearchOptions. Przekazywane jako `bm25: { k, b, d }`. UI: 3 slidery z hint "BM25 to formula rankingowa decydujaca, ktore wyniki sa najbardziej trafne." Tooltipy k/b/d po polsku. |
| 20 | done | gui-1 | 09 | Smaczek #17: combineWith AND_NOT | Rozszerz combine mode o `AND_NOT` i dodaj testy. Kryterium DONE: UI pozwala wybrac `AND_NOT`, wynik odrzuca niechciane termy. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `AND_NOT` do cyklu `combineWith` (OR→AND→AND_NOT). Gdy aktywny, panel zaawansowany pokazuje pole "Wykluczone terminy". Implementacja: wyszukiwanie z AND + post-filtr wykluczajacy wyniki pasujace do podanych slow. `make test` = 35 PASS, `make lint` = PASS. |
| 21 | done | gui-1 | 09 | Smaczek #18: Query tree (nested) | Dodaj reprezentacje zagniezdzonego query tree i demonstracje dzialania. Kryterium DONE: co najmniej jeden scenariusz nested query w UI + test. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `queryTreeEnabled/Query1/Query2` w SearchOptions. UI: toggle + 2 pola (Grupa A, Grupa B). Wewnatrz kazdej grupy AND, miedzy grupami OR. Uzywa natywnego `MiniSearch.search({ combineWith, queries })`. |
| 22 | done | gui-1 | 09 | Smaczek #19: MiniSearch.wildcard | Dodaj demonstracje `MiniSearch.wildcard` w kontrolowanym scenariuszu. Kryterium DONE: opcja wildcard dziala i jest opisana po ludzku. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `wildcardMode` w SearchOptions + toggle "Pokaz wszystko" w panelu zaawansowanym. Gdy wlaczony, `MiniSearch.wildcard` przekazywany jako query — pokazuje wszystkie dokumenty. Bypass empty-query guard. |
| 23 | done | gui-1 | 09 | Smaczek #20: Wildcard + filter | Dodaj laczenie wildcard z filtrem i pokaz roznicy wynikow. Kryterium DONE: demo wildcard+filter przechodzi manual i test. | 2026-02-12 22:08 | 2026-02-12 23:45 | Wildcard dziala z wszystkimi filtrami (kategoria, strategia, rola) — combined filter budowany niezaleznie od trybu zapytania. Hint w UI informuje o laczeniu z filtrami. |
| 24 | done | gui-1 | 09 | Smaczek #21: filter callback (pelny) | Rozszerz filtr poza sztywna kategorie na konfigurowalny callback. Kryterium DONE: mozna wybrac co najmniej 2 strategie callbacka i widac efekt. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `filterStrategy` ('none'/'minLength'/'hasTag') z UI chipsami. minLength: slider 10-200 filtruje po dlugosci tekstu. hasTag: input filtruje po obecnosci tagu. Combined filter laczy strategie z kategoria i rola. |
| 25 | done | gui-1 | 09 | Smaczek #22: Role-based filtering | Dodaj role-based filtering (np. role demo: guest/admin). Kryterium DONE: zmiana roli ogranicza wyniki zgodnie z regula i testem. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `roleFilter` ('all'/'guest'/'admin') z chipsami. Guest nie widzi kategorii "api" (Dokumentacja API), Admin widzi wszystko. Regula zaszyta w `roleAccess` map w `search()`. |
| 26 | done | gui-1 | 09 | Smaczek #25: score explanation (pelne) | Dodaj prosty panel "dlaczego taki score" (bez zargonu), oparty o match/score. Kryterium DONE: przy wyniku widac zrozumiale wyjasnienie punktacji. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `showScoreExplanation` toggle. Gdy aktywny, kazdy wynik pokazuje panel "Dopasowanie:" z formatem `„term" → pole1, pole2`. Styl: mono font, accent border, czytelny uklad. Metoda `getMatchExplanation()` w komponencie. |
| 27 | done | gui-1 | 09 | Smaczek #27: autoSuggest + fuzzy (pelne sterowanie) | Dodaj dedykowane sterowanie fuzzy dla sugestii i wyrazny tryb demo. Kryterium DONE: sugestie fuzzy dzialaja niezaleznie od glownego fuzzy. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `suggestFuzzy` toggle niezalezny od glownego fuzzy. Przekazywany do `autoSuggest({ fuzzy: suggestFuzzy ? 0.2 : false })`. UI w sekcji "Opcje podpowiedzi". |
| 28 | done | gui-1 | 09 | Smaczek #28: autoSuggest + filter | Dodaj filtrowanie sugestii (`autoSuggest` + filter). Kryterium DONE: sugestie respektuja wybrany filtr i jest test. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano `suggestFilterEnabled` toggle. Gdy aktywny, `autoSuggest` dostaje ten sam `filter` co `categoryFilter`. UI: chip "Filtr kategorii" w sekcji podpowiedzi. |
| 29 | done | gui-1 | 09 | Smaczek #29: autoSuggestOptions | Dodaj panel `autoSuggestOptions` (np. combineWith/prefix/fuzzy). Kryterium DONE: zmiana opcji sugestii daje mierzalna roznice wynikow. | 2026-02-12 22:08 | 2026-02-12 23:45 | Dodano kompletny panel "Opcje podpowiedzi" z 4 niezaleznymi kontrolkami: suggestPrefix, suggestFuzzy, suggestFilterEnabled, suggestCombineWith (OR/AND). Kazda zmiana natychmiast wplywa na podpowiedzi. |
| 30 | done | gui-1 | 09 | Smaczek #30: extractField nested | Dodaj obsluge zagniezdzonych pol w `extractField` i demo na danych nested. Kryterium DONE: wyszukiwanie po nested field dziala i ma test. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `extractNestedEnabled`. extractField obsluguje dot notation (`metadata.author`). Dodano metadane do OFFLINE_DOCS (7/10 docs ma `metadata.author`). Szukanie "Kowalski"/"Nowak" daje wyniki. |
| 31 | done | gui-1 | 09 | Smaczek #31: extractField derived fields | Dodaj pola pochodne (derived) w `extractField`. Kryterium DONE: co najmniej jedno pole pochodne jest indeksowane i wyszukiwalne. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `extractDerivedEnabled`. Pole `summary` = tytul + kategoria generowane w extractField. Szukanie po kategorii trafia w pole summary. |
| 32 | done | gui-1 | 09 | Smaczek #32: stringifyField | Dodaj `stringifyField` i demonstracje jego efektu. Kryterium DONE: alternatywna serializacja pola zmienia tokeny zgodnie z testem. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `stringifyFieldEnabled`. Tagi serializowane jako `kategoria:tag` (np. `concepts:search`). Szukanie `concepts:search` daje wynik tylko z tym trybem. |
| 33 | done | gui-1 | 09 | Smaczek #33: custom tokenize | Dodaj custom tokenizer i przełącznik trybow. Kryterium DONE: custom tokenize dziala i jest porownanie z domyslnym. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `customTokenizeEnabled`. CamelCase tokenizer rozbija "MiniSearch" na "mini"+"search", "auto-suggest" na "auto"+"suggest". |
| 34 | done | gui-1 | 09 | Smaczek #34: tokenize split index/search | Dodaj osobne tokenizowanie dla indeksowania i wyszukiwania. Kryterium DONE: dwa niezalezne tokenizery sa aktywne i przetestowane. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `splitTokenizeEnabled`. Index: CamelCase tokenizer. Search: standardowy split po spacji. Dwa niezalezne pipeline. |
| 35 | done | gui-1 | 09 | Smaczek #35: processTerm normalization | Dodaj `processTerm` z normalizacja (np. lowercasing/diakrytyki). Kryterium DONE: normalizacja poprawia trafienia i ma test. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `processTermNormEnabled`. Strip diacritics via NFD + regex. "wyszukiwanie" trafia na "wyszukiwanie" bez polskich znakow. |
| 36 | done | gui-1 | 09 | Smaczek #36: processTerm split index/search | Dodaj osobne `processTerm` dla index/search. Kryterium DONE: oba pipeline sa oddzielne i pokryte testami. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `splitProcessTermEnabled`. Index: normalizacja + lowercase. Search: tylko lowercase. Wymaga wlaczonej normalizacji. |
| 37 | done | gui-1 | 09 | Smaczek #37: processTerm synonyms | Dodaj obsluge synonimow w `processTerm`. Kryterium DONE: synonimy zwiekszaja trafienia zgodnie z testem. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `synonymsEnabled`. Mapa: js→javascript, ts→typescript, frontend→gui/ui, szukaj→wyszukaj/znajdz. Synonimy rozwijane przy indeksowaniu. |
| 38 | done | gui-1 | 09 | Smaczek #38: processTerm discard terms | Dodaj odrzucanie wybranych terminow (stop-terms). Kryterium DONE: konfiguracja discard dziala i ma test regresji. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `discardTermsEnabled`. Stop-words: i, w, na, z, do, to, the, a, an, is... Odrzucane przy indeksowaniu i szukaniu. |
| 39 | done | gui-1 | 09 | Smaczek #39: custom idField | Dodaj wsparcie `idField` roznego od `id`. Kryterium DONE: indeks dziala na niestandardowym identyfikatorze i ma test. | 2026-02-12 22:08 | 2026-02-12 23:55 | Dodano toggle `customIdFieldEnabled`. idField=docId z extractField zwracajacym `doc-{id}`. Indeks dziala na niestandardowym identyfikatorze. |
| 40 | done | gui-1 | 09 | Smaczek #41: addAll batch runtime | Dodaj runtime batch import (`addAll`) z UI i testem. Kryterium DONE: mozna dodac paczke dokumentow bez restartu. | 2026-02-12 22:08 | 2026-02-13 00:16 | Dodano `addAllDocuments()` w serwisie. UI: przycisk "Dodaj paczke (addAll)" dodajacy 5 przykladowych dokumentow. Test: `should add batch documents via addAll` PASS. `ng test` = 45 PASS, `ng lint` = PASS. |
| 41 | done | gui-1 | 09 | Smaczek #42: addAllAsync chunking | Dodaj `addAllAsync` z chunkingiem i feedbackiem postepu. Kryterium DONE: async import dziala bez blokowania UI i ma test. | 2026-02-12 22:08 | 2026-02-13 00:16 | Dodano `addAllDocumentsAsync()` z recznym chunkingiem (domyslnie 50, demo=20) i sygnalem `asyncProgress` (0-100%). UI: przycisk "Dodaj 100 async" + progress bar z aria-progressbar. Test: `should add documents asynchronously with progress` PASS. |
| 42 | done | gui-1 | 09 | Smaczek #43: remove (demo/UI) | Dodaj kontrolke UI do `remove` i scenariusz demo usuniecia po ID. Kryterium DONE: dokument znika z wynikow po remove i jest test/manual. | 2026-02-12 22:08 | 2026-02-13 00:16 | Dodano sekcje "Usuwanie dokumentow" z inputem ID + przyciskiem "Usun" (remove). Tooltip wyjasnia natychmiastowe usuwanie. Test: `should remove a document by ID` PASS + `should show remove and discard controls` PASS. |
| 43 | done | gui-1 | 09 | Smaczek #44: discard (demo/UI) | Dodaj kontrolke UI do `discard` i porownanie z `remove`. Kryterium DONE: discard dziala i jest pokazany z metrykami dirt. | 2026-02-12 22:08 | 2026-02-13 00:16 | Dodano input ID + przycisk "Odrzuc" (discard) obok remove. Hint pod spodem wyjasnia roznice (leniwe usuwanie, wymaga vacuum). Metryki dirt widoczne w panelu metryk. Test: `should discard a document by ID and increase dirt count` PASS. |
| 44 | done | gui-1 | 09 | Smaczek #46: discardAll | Dodaj `discardAll` (lub rownowazny batch discard) z bezpiecznym potwierdzeniem. Kryterium DONE: batch discard dziala i jest test/manual. | 2026-02-12 22:08 | 2026-02-13 00:16 | Dodano `discardAllDocuments()` w serwisie (iteruje discard po wszystkich ID). UI: przycisk "Odrzuc wszystkie (discardAll)" z inline confirmation (Tak/Anuluj). Test: `should discard all documents` PASS. |
| 45 | done | gui-1 | 09 | Smaczek #50: toJSON/loadJSON/loadJSONAsync (real demo) | Dodaj realny snapshot panel: save/load/loadAsync indeksu i dowod dzialania. Kryterium DONE: mozna zapisac i odtworzyc indeks bez reindeksacji fetch. | 2026-02-12 22:08 | 2026-02-13 00:16 | Dodano `saveToJSON()`, `loadFromJSON()`, `loadFromJSONAsync()` w serwisie + sygnal `snapshotJson`. UI: panel "Snapshot indeksu" z 3 przyciskami (Zapisz/Wczytaj/Wczytaj async) + info o rozmiarze i czasie wczytania. Testy: `should save and restore index via toJSON/loadJSON` PASS + `should restore index asynchronously via loadJSONAsync` PASS + `should show snapshot panel` PASS. |
| 46 | done | gui-1 | 09 | Klikalne linki w smaczkach i wynikach wyszukiwania | Dodaj klikalne linki do dokumentow w sekcji smaczkow (snippety) i przy wynikach wyszukiwania. Kryterium DONE: kazdy smaczek ma link do dokumentacji, a wynik wyszukiwania ma dzialajacy link "Otworz dokument". | 2026-02-12 23:28 | 2026-02-12 23:32 | Dodano linki dokumentacji do smaczkow (`codeSnippets.docUrl` + `.ms-snippet__doc-link`) oraz link "Otworz dokument" przy kazdym wyniku (`EnrichedResult.url` + `.ms-result__doc-link`, fallback do GitHub search). Rozszerzono modele i serializacje o `url` w serwisie. Dodano testy komponentu i serwisu dla linkow. Weryfikacja: `make -C ut-angular test` = 48/48 PASS, `make -C ut-angular lint` = PASS. |
| 47 | done | gui-1 | 09 | Custom highlight exact/fuzzy (inspiracja floating-toc) | Zaimplementuj w MiniSearch wlasny mechanizm podswietlen: exact i fuzzy (Levenshtein), klasy CSS `--exact/--fuzzy`, merge zakresow z priorytetem exact. Kryterium DONE: wynik HTML ma klasy mocy dopasowania, a style i testy pokrywaja oba przypadki. | 2026-02-12 23:40 | 2026-02-12 23:47 | Dodano custom pipeline highlightu w `minisearch-search.service.ts`: `buildHighlightedHtml`, `findExactHighlightRanges`, `findBestFuzzyHighlightRange`, `mergeHighlightRanges`, `levenshteinDistance`; klasy `ms-highlight--exact` i `ms-highlight--fuzzy` + style w SCSS. Pokrycie testami: `should highlight matched terms` oraz `should mark fuzzy matches with dedicated class`. Weryfikacja: `make -C ut-angular test` = 49/49 PASS, `make -C ut-angular lint` = PASS. |
| 48 | done | gui-1 | 09 | Wzmianka na stronie glownej o customowych rozwiazaniach | Dodaj na stronie glownej (`/minisearch`) sekcje wyjasniajaca, ktore elementy sa customowe, oraz opisz nasz przyklad (highlight exact/fuzzy + linkowane wyniki/smaczki). Kryterium DONE: widoczna sekcja z jasnym opisem i bez regresji test/lint. | 2026-02-12 23:49 | 2026-02-12 23:51 | Dodano sekcje `.ms-custom-note` w hero na `/minisearch` z opisem customow (exact/fuzzy highlight + klikalne linki) i konkretnym scenariuszem demo (`angular` vs `anglar`). Dodano style sekcji w SCSS oraz test komponentu `should show custom solutions note on homepage`. Weryfikacja: `make -C ut-angular test` = 50/50 PASS, `make -C ut-angular lint` = PASS. |
| 49 | done | gui-1 | 09 | Poprawka globalnego skrotu Alt+Shift+M | Napraw dzialanie skrotu Alt+Shift+M tak, aby reagowal globalnie na stronie (takze przy fokusie poza centralnym kontenerem), a nie tylko gdy event przechodzi przez `.ms-page`. Kryterium DONE: skrot dziala niezaleznie od miejsca fokusu i ma test regresji. | 2026-02-12 23:52 | 2026-02-12 23:53 | Obsluge skrotu przeniesiono z `(keydown)` na `.ms-page` do globalnego `@HostListener('window:keydown')` w komponencie; dodano case-insensitive sprawdzanie `event.key.toLowerCase() === 'm'`. Usunieto lokalne bindowanie keydown z HTML. Dodano test regresji `should focus search input with global shortcut even when event is outside page container` (dispatch na `window`). Weryfikacja: `make -C ut-angular test` = 51/51 PASS, `make -C ut-angular lint` = PASS. |
| 50 | done | gui-1 | 09 | Wzmianka o smaczkach z floating-toc (proste opisy) | Dodaj na stronie glownej (`/minisearch`) prosty opis wskazanych funkcji inspiracyjnych: `buildSearchIndex`, `toSearchResult`, `buildSnippet`, `stripHtml`, `normalize`, `tokens`, `ngramsFor`, `buildNgramsField`, `getStepContentPlainText`, `buildSectionFreshness`/`evaluateStepFreshness`. Kryterium DONE: lista jest widoczna i zrozumiala dla laika, bez regresji test/lint. | 2026-02-12 23:55 | 2026-02-12 23:56 | Najpierw wykonano push zmian (`main -> origin/main`, commit `9aed8df`). Nastepnie rozbudowano sekcje `.ms-custom-note` na stronie glownej o liste wszystkich wskazanych funkcji z prostymi wyjasnieniami (build/index/snippet/ngrams/freshness), z referencja do pliku inspiracyjnego `src/app/shared/floating-toc/floating-toc.component.ts`. Dodano pokrycie testowe (asercje na `buildSearchIndex` i `evaluateStepFreshness`). Weryfikacja: `make -C ut-angular test` = 51/51 PASS, `make -C ut-angular lint` = PASS. |
| 51 | done | gui-1 | 09 | Custom tooltipy: dluzsze opisy + styl premium | Rozbuduj tooltipy w `/minisearch`: dluzsze, bardziej opisowe tresci oraz customowy styl pasujacy do strony (zaokraglone ramki, spójna kolorystyka, animacja). Kryterium DONE: tooltipy nie sa natywne `title`, maja jednolity wyglad i dzialaja na hover/focus. | 2026-02-12 23:59 | 2026-02-13 00:01 | Zamieniono wszystkie tooltipy z natywnego `title` na customowe `data-tooltip` (w tym bindingi dynamiczne: `[attr.data-tooltip]`). Dodano nowy system wizualny tooltipow w SCSS: gradientowe tlo, zaokraglone ramki, obrys, cien, strzalka, animacja hover/focus i wsparcie `prefers-reduced-motion`. Rozszerzono opisy najwazniejszych kontrolek (offline/online, czyszczenie, filtr "Wszystko", tryby OR/AND/AND NOT). Dodano test regresji: `should use custom tooltip attributes instead of native title`. Weryfikacja: `make -C ut-angular test` = 52/52 PASS, `make -C ut-angular lint` = PASS. |
| 52 | done | gui-1 | 09 | Audyt inspiracji floating-toc i selekcja wdrozen | Zweryfikuj, ktore funkcje z listy inspiracyjnej faktycznie sa zaimplementowane (lub maja ekwiwalent), ktore nie i dlaczego. Nastepnie przeredaguj sekcje na stronie glownej tak, by pokazywala tylko sensowne elementy + decyzje "dlaczego tak". Kryterium DONE: audyt w `additional-notes/52-audyt-inspiracji-floating-toc.md` + sekcja UI bez sugestii, ze wdrozono wszystko 1:1. | 2026-02-13 00:03 | 2026-02-13 00:09 | Wykonano audyt z macierza decyzji (mamy/nie mamy + uzasadnienie) w `additional-notes/52-audyt-inspiracji-floating-toc.md`. Sekcje `.ms-custom-note` przeredagowano na "wdrozone i wartosciowe" vs "swiadomie odlozone" zamiast listy 1:1, z zachowaniem nazw inspiracyjnych tylko jako punktu odniesienia. Dodano subtesty copy w komponencie (`should show custom solutions note on homepage`). Weryfikacja: `make -C ut-angular test` = 52/52 PASS, `make -C ut-angular lint` = PASS. |
| 53 | done | gui-1 | 09 | Usuniecie calosci bloku inspiracji floating-toc z `/minisearch` | Na wyrazna prosbe wlasciciela usun caly blok "Inspiracja (nie kopia 1:1) / Co wdrozylismy / Co swiadomie odlozylismy" z widoku strony glownej MiniSearch, wraz z zaleznymi asercjami testow i nieuzywanymi stylami. Kryterium DONE: blok nie wystepuje w HTML, testy nie sprawdzaja usunietych tresci, lint/test PASS. | 2026-02-13 00:17 | 2026-02-13 00:18 | Usunieto caly fragment inspiracji z `minisearch-page.component.html` (sekcja source + listy wdrozen/odlozen), wyczyszczono nieuzywane klasy SCSS i zaktualizowano test komponentu (brak asercji na usuniete tresci). Weryfikacja: `make -C ut-angular test` = 52/52 PASS, `make -C ut-angular lint` = PASS. |
| 54 | done | gui-1 | 09 | N-gramy w playgroundzie — toggle indeksowy + porównanie side-by-side | Dodaj n-gram tokenizer jako opcję indeksu (index-time, reindeksacja) z sliderem rozmiaru n (2-5) oraz sekcję porównawczą „N-gram vs Standard" z osobnym inputem i dwukolumnowym wynikiem. Kryterium DONE: n-gram toggle działa, porównanie pokazuje różnice, testy PASS. | 2026-02-13 00:25 | 2026-02-13 00:27 | Dodano `ngramEnabled`/`ngramSize` do SearchOptions i defaults. N-gram tokenizer w `indexDocuments()` (nadpisuje inne tokenizery). Metoda `compareNgramVsStandard()` buduje 2 niezależne indeksy (standard + ngram) i porównuje wyniki. Komponent: `ngramCompareQuery` + `runNgramCompare()`. HTML: toggle + slider w panelu zaawansowanym (sekcja Konfiguracja indeksu) + sekcja `.ms-ngram-compare` z dwukolumnowym gridem. SCSS: pełne style (input, grid, kolumny, items, responsywność). Testy: 3 nowe (sekcja widoczna, porównanie daje wyniki, reindeksacja zwiększa liczbę termów). `ng test` = 55/55 PASS, `ng lint` = PASS. |
| 55 | done | gui-1 | 09 | Spolszczenie zaindeksowanych dokumentow (dataset) | Przetlumacz tytuly/tresci dokumentow w `ut-angular/public/minisearch-docs.json` (oraz tytuly OFFLINE_DOCS) na jezyk polski, zostawiajac nazwy wlasne i identyfikatory API. Kryterium DONE: brak widocznych tresci EN w wynikach wyszukiwania (poza nazwami wlasnymi/API). | 2026-02-13 01:05 | 2026-02-13 01:27 | Przetlumaczono tytuly i tresci 200 dokumentow w `ut-angular/public/minisearch-docs.json` oraz spolszczono tytuly OFFLINE_DOCS w `ut-angular/src/app/minisearch/minisearch-search.service.ts`. Weryfikacja: `make -C ut-angular test` = 55/55 PASS, `make -C ut-angular lint` = PASS. |

<!-- Dodawaj kolejne wiersze poniżej; dla nowych ID-T użyj statusów proposal/planning/planned w zależności od uzgodnień. -->

- Przy kolejnych wierszach ustaw `Agent` zgodnie z profilem (`api-1`, `gui-1`, `ba`, `human-pm`...).
- Jeśli zadanie obejmuje co najmniej dwa serwisy (np. `api` + `gui`), dodaj osobny krok „kontrakt międzyserwisowy” przed pierwszym krokiem implementacyjnym któregokolwiek z tych serwisów.
- Jeśli potrzebujesz dłuższych notatek, dodaj plik `additional-notes/<ID-T>.md` i wskaż go w kolumnie „Co zrobiono do tej pory".
- Po akceptacji planu ustaw `Status` wiersza `01` na `done` i, jeśli trzeba, zmień sufiks katalogu (np. `_planned`).

---

## Checklista przed zamknięciem `ID-T = 01`

Zanim ustawisz `Status` wiersza `01` na `done`, upewnij się że:

- [ ] Zmieniono tytuł pliku `additional-contexts.md` (usunięto „szablon do skopiowania")
- [ ] Usunięto podpowiedzi w kursywie (`_Tu wklej..._`) z `additional-contexts.md`
- [ ] Wypełniono co najmniej sekcje 1–5 w `additional-contexts.md`
- [ ] Jeśli zadanie obejmuje co najmniej 2 serwisy (np. API + GUI), plan zawiera osobny krok „kontrakt międzyserwisowy” (minimum: operacje/endpointy, payloady, błędy, kompatybilność) i ten krok ma status `done` zanim ruszą ID‑T implementacyjne tych serwisów.
- [ ] Audyt planu ukończony: 2 subagenci + Claude + Gemini uruchomione równolegle; synteza i decyzje dopiero po komplecie 4 raportów (fallback wymaga decyzji właściciela); P1/P0 blokują, P2 po 3 rundach nie blokują; raporty w `additional-notes/<YYYYMMDD-HHMM>-plan-audit-*.md` (i wpisane w `Co zrobiono do tej pory` w wierszu `01`)
- [ ] Jeśli task dotyka UI/przeglądarki: plan wymaga skrótu kont testowych (`ATK_BROWSER_BASE_URL`, `ATK_BROWSER_TEST_USER`, `ATK_BROWSER_TEST_PASS`) + referencji do `/.env.test-accounts`; dla tasków bez UI `agent-browser` nie jest wymagany.
- [ ] Zmieniono daty `2026-02-12 20:23` na rzeczywiste w tej tabeli
- [ ] Zmieniono tytuł tego pliku (usunięto „szablon do skopiowania")
- [ ] Rozpisano kolejne wiersze planu (`02`, `03`...) z właściwymi statusami
- [ ] Zaktualizowano `SESSION*.md` (`current-task`, `current-id-t`, `last-updated`)

---

## Checklista przed zamknięciem taska (`*_done`)

Zanim ustawisz status katalogu/zadania na `_done`, upewnij się że:

- [ ] Wszystkie ID‑T są `done` lub jawnie `on-hold` z uzasadnieniem.
- [ ] Wymagane testy/kwalifikowane kroki zostały wykonane i opisane.
- [ ] Audyty końcowe (2 subagenci + Claude + Gemini) uruchomione równolegle; synteza i decyzje dopiero po komplecie 4 raportów; bez zastrzeżeń; raporty w `additional-notes/<YYYYMMDD-HHMM>-final-audit-*.md`.
- [ ] Jeśli task dotyka UI/przeglądarki, wykonano i opisano testy manualne `agent-browser` (start od `agent-browser connect 9222`) z użyciem danych z `/.env.test-accounts`.
- [ ] Brak aktywnych `[BLOCKER]`.
- [ ] `tasks.md` oraz `additional-notes/` zawierają komplet dowodów i notatek zamknięcia.
